<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Basic Threat Event Callback Example</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Basic Threat Event Callback Example</h1>

    <section>

<header>
    

    <h2>Basic Threat Event Callback Example</h2>
</header>

<article>
    <p>This sample demonstrates registering a callback with the DXL fabric to receive
threat events when ePO sends them. The topic and payload for each event which is
received is displayed in JSON format.</p>
<h3>Prerequisites</h3><ul>
<li>The samples configuration step has been completed (see <a href="tutorial-samples.html">Samples</a>).</li>
</ul>
<h3>Running</h3><p>To run this sample execute the
<code>sample/basic/basic-threat-event-callback-example.js</code> script as follows:</p>
<pre class="prettyprint source lang-sh"><code>$ node sample/basic/basic-threat-event-callback-example.js</code></pre><p>The output should appear similar to the following:</p>
<pre class="prettyprint source"><code>Waiting for threat event notifications...</code></pre><p>At this point the sample is listening for threat events from the DXL fabric.</p>
<p>The actual steps to force a threat event to be sent by ePO are outside the scope
of this client library. After the event has been sent, the event information
should appear with the console that the sample is running (similar to the
output below):</p>
<pre class="prettyprint source"><code>Threat event on topic: /mcafee/event/epo/threat/response
&lt;event json...> </code></pre><h3>Details</h3><p>The majority of the sample code is shown below:</p>
<pre class="prettyprint source lang-js"><code>// Connect to the fabric, supplying a callback function which is invoked
// when the connection has been established
client.connect(function () {
  // Create the ePO client
  var epoClient = new EpoClient(client)

  // Register the ePO threat event callback with the client
  epoClient.addThreatEventCallback(function (threatEventObj, originalEvent) {
    // Display the DXL topic that the event was received on
    console.log('Threat event on topic: ' + originalEvent.destinationTopic)

    // Dump the threat event object
    console.log(MessageUtils.objectToJson(threatEventObj, true))
  })

  // Wait forever
  console.log('Waiting for threat event notifications...')
})</code></pre><p>Once a connection is established to the DXL fabric, the callback function
supplied to the DXL client instance's
<a href="https://opendxl.github.io/opendxl-client-javascript/jsdoc/Client.html#connect">connect()</a>
method will be invoked. From within the callback function, an <a href="EpoClient.html">EpoClient</a>
instance is created.</p>
<p>Next, the EpoClient instance's
<a href="EpoClient.html#addThreatEventCallback">addThreatEventCallback()</a> method
is called with a callback function to invoke as each threat event is received. </p>
<p>When a threat event is received, the event callback is invoked with two
parameters:</p>
<ul>
<li>A JavaScript object, <code>threatEventObj</code>, which is decoded from the threat
event JSON payload.</li>
<li>The full DXL
<a href="https://opendxl.github.io/opendxl-client-javascript/jsdoc/Event.html">event message</a>
which is sent for the threat event.</li>
</ul>
<p>The threat event object is formatted as a pretty-printed string via a call to
the
<a href="https://opendxl.github.io/opendxl-bootstrap-javascript/jsdoc/module-MessageUtils.html#.jsonToObject">MessageUtils.objectToJson()</a>
method and then displayed to the console.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-OutputFormat.html">OutputFormat</a></li></ul><h3>Externals</h3><ul><li><a href="external-DxlClient.html">DxlClient</a></li><li><a href="external-Event.html">Event</a></li></ul><h3>Classes</h3><ul><li><a href="EpoClient.html">EpoClient</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-installation.html">Installation</a></li><li><a href="tutorial-samples.html">Samples</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>