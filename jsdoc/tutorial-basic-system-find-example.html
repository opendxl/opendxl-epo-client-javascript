<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Basic System Find Example</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Basic System Find Example</h1>

    <section>

<header>
    

    <h2>Basic System Find Example</h2>
</header>

<article>
    <p>This sample invokes and displays the results of a &quot;system find&quot; remote command
via the ePO DXL service. The results of the find command are displayed in JSON
format.</p>
<h3>Prerequisites</h3><ul>
<li>The samples configuration step has been completed (see <a href="tutorial-samples.html">Samples</a>).</li>
<li>The ePO DXL service is running and available on the fabric (see
<a href="https://github.com/opendxl/opendxl-epo-service-python">ePO DXL Python Service</a>).</li>
<li>The client is authorized to invoke the ePO DXL Service (see 
<a href="https://opendxl.github.io/opendxl-epo-service-python/pydoc/authorization.html#client-authorization">ePO DXL Service Client Authorization</a>).</li>
<li>The user that is connecting to the ePO server (within the ePO DXL service)
has permission to execute the &quot;system find&quot; remote command.</li>
</ul>
<h3>Setup</h3><p>Modify the example to include the <code>unique identifier</code> associated with the ePO
to invoke the remote command on.</p>
<p>For more information on the ePO unique identifier, refer to the following:</p>
<ul>
<li><a href="https://opendxl.github.io/opendxl-epo-service-python/pydoc/configuration.html#dxl-service-configuration-file-dxleposervice-config">Configuration File for ePO DXL Python Service (uniqueId property)</a></li>
<li>The <a href="EpoClient.html#.lookupEpoUniqueIdentifiers">EpoClient.lookupEpoUniqueIdentifiers()</a>
method which will return an array of strings containing the identifiers for
all ePO servers that are currently connected to the fabric.</li>
</ul>
<p>For example:</p>
<pre class="prettyprint source lang-js"><code>var EPO_UNIQUE_ID = 'epo1'</code></pre><p>If only one ePO server is connected to the DXL fabric this constant can be
set to <code>null</code> (the client will automatically determine the ePO's unique
identifier).</p>
<p>Modify the example to include the search text for the system find command.</p>
<p>For example:</p>
<pre class="prettyprint source lang-js"><code>var SEARCH_TEXT = 'broker'</code></pre><h3>Running</h3><p>To run this sample execute the <code>sample/basic/basic-system-find-example.js</code>
script as follows:</p>
<pre class="prettyprint source lang-sh"><code>$ node sample/basic/basic-system-find-example.js</code></pre><p>The output should appear similar to the following:</p>
<pre class="prettyprint source"><code>[
    {
        &quot;EPOBranchNode.AutoID&quot;: 7,
        &quot;EPOComputerProperties.CPUSerialNum&quot;: &quot;N/A&quot;,
        &quot;EPOComputerProperties.CPUSpeed&quot;: 2794,
        &quot;EPOComputerProperties.CPUType&quot;: &quot;Intel(R) Core(TM) i7-4980HQ CPU @ 2.80GHz&quot;,
        &quot;EPOComputerProperties.ComputerName&quot;: &quot;broker1&quot;,
        &quot;EPOComputerProperties.DefaultLangID&quot;: &quot;0409&quot;,
        &quot;EPOComputerProperties.Description&quot;: null,
        ...
    }
]</code></pre><p>The properties for each system found will be displayed.</p>
<h3>Details</h3><p>The majority of the sample code is shown below:</p>
<pre class="prettyprint source lang-js"><code>// The ePO unique identifier
var EPO_UNIQUE_ID = null

// The search text
var SEARCH_TEXT = 'broker'

// Connect to the fabric, supplying a callback function which is invoked
// when the connection has been established
client.connect(function () {
  // Create the ePO client
  var epoClient = new EpoClient(client, EPO_UNIQUE_ID,
    function (clientError) {
      if (clientError) {
        // Destroy the client - frees up resources so that the application
        // stops running
        client.destroy()
        console.log('Error creating ePO client: ' + clientError.message)
      } else {
        // Run the system find command
        epoClient.runCommand('system.find',
          function (searchError, responseText) {
            // Destroy the client - frees up resources so that the application
            // stops running
            client.destroy()
            if (searchError) {
              console.log('Error finding system: ' + searchError.message)
            } else {
              // Load find result into object
              var responseObj = MessageUtils.jsonToObject(
                MessageUtils.decode(responseText))
              // Display the results
              console.log(MessageUtils.objectToJson(responseObj, true))
            }
          },
          {searchText: SEARCH_TEXT},
          OutputFormat.JSON
        )
      }
    }
  )
})</code></pre><p>Once a connection is established to the DXL fabric, the callback function
supplied to the DXL client instance's
<a href="https://opendxl.github.io/opendxl-client-javascript/jsdoc/Client.html#connect">connect()</a>
method will be invoked. From within the callback function, an <a href="EpoClient.html">EpoClient</a>
instance is created. The EpoClient instance will be used to invoke remote
commands on the ePO server. The <code>unique identifier</code> of the ePO server to invoke
remote commands on is specified as an parameter to the client constructor. In
this particular case, a value of <code>null</code> is specified, which triggers the client
to automatically determine the ePO server's unique identifier. This will not
work if multiple ePO servers are connected to the fabric (an error will be
delivered in the <code>clientError</code> parameter passed into the callback function).</p>
<p>Next, the EpoClient instance's <a href="EpoClient.html#runCommand">runCommand()</a> method
is called to invoke the <code>system.find</code> remote command on the ePO server with a
<code>searchText</code> parameter that is specified with the value of <code>broker</code> and an
output format of <a href="module-OutputFormat.html#.JSON">JSON</a>. On successful
execution of the ePO remote command, the <code>responseText</code> parameter provided to the
callback function contains the command results.</p>
<p>The <code>responseText</code> parameter should be a binary
<a href="https://nodejs.org/api/buffer.html">Buffer</a>. The
<a href="https://opendxl.github.io/opendxl-bootstrap-javascript/jsdoc/module-MessageUtils.html#.decode">MessageUtils.decode()</a>
method is invoked to convert the Buffer into a String, which is then loaded
into a JavaScript object via a call to the 
<a href="https://opendxl.github.io/opendxl-bootstrap-javascript/jsdoc/module-MessageUtils.html#.jsonToObject">MessageUtils.jsonToObject()</a>
method.</p>
<p>Finally, the JavaScript response object is formatted as a pretty-printed string
via a call to the
<a href="https://opendxl.github.io/opendxl-bootstrap-javascript/jsdoc/module-MessageUtils.html#.jsonToObject">MessageUtils.objectToJson()</a>
method and then displayed to the console.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-OutputFormat.html">OutputFormat</a></li></ul><h3>Externals</h3><ul><li><a href="external-DxlClient.html">DxlClient</a></li><li><a href="external-DxlError.html">DxlError</a></li><li><a href="external-Event.html">Event</a></li></ul><h3>Classes</h3><ul><li><a href="EpoClient.html">EpoClient</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-installation.html">Installation</a></li><li><a href="tutorial-samples.html">Samples</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>